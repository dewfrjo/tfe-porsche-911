/* utile si pas déjà défini globalement */
:root { --vw-safe: 100dvw; }

.S3 {
  background: linear-gradient(to bottom, #ECECE7 90%, #010101 90%);
  /* largeur sûre + anti overflow horizontal de sécurité */
  inline-size: min(100%, var(--vw-safe));
  overflow-x: clip;
}

.slider {
  max-width: 100%;
  height: 65vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 20px;
  box-sizing: border-box;

  /* largeur sûre + garde-fou */
  inline-size: min(100%, var(--vw-safe));
  overflow-x: clip;

  @media (min-width: $breakpoint-tablet) {
    height: 85vh;
  }

  @media (min-width: $breakpoint-desktop) {
    display: none;
  }

  .slide {
    display: none;

    &__frein__img {
      width: 50%;
      display: block;
      margin: 0 auto;

      @media (min-width: $breakpoint-tablet) {
        width: 50% !important;
      }
    }

    &.is-visible { display: block; }

    h2 {
      font-size: 36px;
      letter-spacing: 4px;
      margin-bottom: 15px;
      text-align: center;

      @media (min-width: $breakpoint-tablet) {
        font-size: 96px;
        letter-spacing: 12px;
      }
    }

    p {
      font-size: 12px;
      margin-bottom: 20px;
      max-width: 60ch;

      @media (min-width: $breakpoint-tablet) {
        font-size: 16px;
        margin: 4rem auto;
      }
    }

    img {
      /* centré et sûr sur toutes les largeurs */
      display: block;
      max-width: 90%;
      height: auto;
      margin: 0 auto;

      @media (min-width: $breakpoint-tablet){
        width: 70%;
        margin: 0 auto;
      }
    }
  }

  .pagination {
    display: flex;
    gap: 8px;
    margin-top: 20px;

    .dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #C9C9C9;
      transition: background 0.3s;

      &.is-current {
        background: $indian-red;
        width: 2rem;
        border-radius: 8px;
      }
    }
  }
}

/* --- Desktop features --- */
.porsche-features {
  display: flex;
  flex-wrap: wrap;
  padding: 2rem;
  padding-bottom: 10rem;

  /* largeur sûre + empêche un enfant de forcer la ligne */
  inline-size: min(100%, var(--vw-safe));
  overflow-x: clip;

  @media (max-width: $breakpoint-desktop) {
    display: none;
  }

  .content-left {
    flex: 1;
    min-width: 300px;
    padding: 2rem 0 2rem 5rem;

    /* important pour les flex-items contenant du texte/long mots */
    min-inline-size: 0;

    &__info { margin-left: 3rem; }

    h2 {
      font-size: 3rem;
      font-weight: 700;
      margin-bottom: 1rem;
      text-transform: uppercase;
    }

    p {
      max-width: 500px;
      line-height: 1.6;
      font-size: 1.1rem;
    }

    img {
      margin-top: 2rem;
      max-width: 100%;
      height: auto;
      display: block;
    }
  }

  .content-right {
    display: flex;
    gap: 1rem;
    justify-content: center;
    align-items: center;
    width: 35rem;
    margin-left: 3rem;

    /* sécurité largeur en cas de viewport serré */
    max-inline-size: 100%;
    min-inline-size: 0;

    .feature-card {
      cursor: pointer;
      text-align: center;
      border: 2px solid transparent;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      opacity: 1 !important;

      &.active {
        border: 3px solid $yellow;
        border-radius: 8px;
        background-color: $yellow;
        box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
      }

      span {
        display: block;
        font-size: 1.2rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
        text-transform: uppercase;
        transition: transform 0.3s ease;
      }

      .image {
        width: 130px;
        height: 300px;
        background-size: cover;
        background-position: center;
        border-radius: 4px;

        &:hover { transform: scale(1.08); }
      }
    }
  }
}

.hidden { display: none !important; }

#feature-text { white-space: pre-line; }

/* --- Escalier --- */
#cards-container {
  display: flex;
  gap: 2rem;
  justify-content: flex-start;
  align-items: center;
  margin-top: -5rem;

  /* évite qu’un enfant large force la largeur */
  min-inline-size: 0;

  .feature-card {
    transition: transform 0.3s ease;

    &:nth-child(1) {
      transform: translateY(100px);
      &:hover { transform: translateY(60px) scale(1.08); }
    }

    &:nth-child(2) {
      transform: translateY(30px);
      &:hover { transform: translateY(30px) scale(1.08); }
    }

    &:nth-child(3) {
      transform: translateY(-40px);
      &:hover { transform: translateY(0px) scale(1.08); }
    }
  }
}
